<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>kanaval: kanaval/custom_selections.hpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">kanaval
   </div>
   <div id="projectbrief">C++ library for validating kana files</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_cad48341f1c85806521c29a6597af908.html">kanaval</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">custom_selections.hpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Validate custom selection contents.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;H5Cpp.h&quot;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &quot;utils.hpp&quot;</code><br />
<code>#include &quot;misc.hpp&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for custom_selections.hpp:</div>
<div class="dyncontent">
<div class="center"><img src="custom__selections_8hpp__incl.png" border="0" usemap="#akanaval_2custom__selections_8hpp" alt=""/></div>
<map name="akanaval_2custom__selections_8hpp" id="akanaval_2custom__selections_8hpp">
<area shape="rect" title="Validate custom selection contents." alt="" coords="41,5,245,32"/>
<area shape="rect" title=" " alt="" coords="5,155,77,181"/>
<area shape="rect" title=" " alt="" coords="107,155,165,181"/>
<area shape="rect" title=" " alt="" coords="193,155,263,181"/>
<area shape="rect" href="misc_8hpp_source.html" title=" " alt="" coords="68,80,143,107"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="custom__selections_8hpp__dep__incl.png" border="0" usemap="#akanaval_2custom__selections_8hppdep" alt=""/></div>
<map name="akanaval_2custom__selections_8hppdep" id="akanaval_2custom__selections_8hppdep">
<area shape="rect" title="Validate custom selection contents." alt="" coords="5,5,209,32"/>
<area shape="rect" href="validate_8hpp.html" title="Validate the embedded state file of a kana file." alt="" coords="37,80,177,107"/>
</map>
</div>
</div>
<p><a href="custom__selections_8hpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacekanaval"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacekanaval.html">kanaval</a></td></tr>
<tr class="memdesc:namespacekanaval"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utilities for validating kana files. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adaefb7415393522687939b55696507b2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="custom__selections_8hpp.html#adaefb7415393522687939b55696507b2">kanaval::custom_selections::validate</a> (const H5::Group &amp;handle, int num_cells, const std::vector&lt; std::string &gt; &amp;modalities, const std::vector&lt; int &gt; &amp;num_genes, int version)</td></tr>
<tr class="separator:adaefb7415393522687939b55696507b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Validate custom selection contents. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="adaefb7415393522687939b55696507b2" name="adaefb7415393522687939b55696507b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaefb7415393522687939b55696507b2">&#9670;&nbsp;</a></span>validate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void kanaval::custom_selections::validate </td>
          <td>(</td>
          <td class="paramtype">const H5::Group &amp;&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_cells</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>modalities</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>num_genes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>version</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Check contents for the custom selections step. Contents are stored inside a <code>custom_selections</code> HDF5 group at the root of the file. The <code>custom_selections</code> group itself contains the <code>parameters</code> and <code>results</code> subgroups.</p>
<hr  />
<p> <code>parameters</code> should contain:</p>
<ul>
<li><code>selections</code>: a group defining the custom selections. Each child is named after a user-created selection. Each child is an integer dataset of arbitrary length containing the indices of the selected cells. Note that indices refer to the dataset after QC filtering and should be less than <code>num_cells</code>.</li>
</ul>
<hr  />
<p> <code>results</code> should contain <code>per_selection</code>, a group containing the marker results for each selection after a comparison to a group containing all other cells. Each child of <code>per_selection</code> is named after its selection and is itself a group containing children named according to <code>modalities</code>. Each modality-specific child is yet another group containing the statistics for that modality:</p>
<ul>
<li><code>means</code>: a float dataset of length equal to the number of features in that modality, containing the mean expression of each gene in the selection.</li>
<li><code>detected</code>: a float dataset of length equal to the number of features in that modality, containing the proportion of cells with detected expression of each gene in the selection.</li>
<li><code>lfc</code>: a float dataset of length equal to the number of features in that modality, containing the log-fold change in the selection compared to all other cells.</li>
<li><code>delta_detected</code>: same as <code>lfc</code>, but for the delta-detected (i.e., difference in the percentage of detected expression).</li>
<li><code>cohen</code>: same as <code>lfc</code>, but for Cohen's d.</li>
<li><code>auc</code>: same as <code>lfc</code>, but for the AUCs.</li>
</ul>
<div style="color:blue"> <details>
 <summary>For versions 1.0-1.2</summary> <code>results</code> should contain:</details>
</div><div style="color:blue"><details>
<ul>
<li><code>markers</code>: a group containing the marker results for each selection after a comparison to a group containing all other cells. Each child is named after its selection and is a group containing:<ul>
<li><code>means</code>: a float dataset of length equal to the number of genes, containing the mean expression of each gene in the selection.</li>
<li><code>detected</code>: a float dataset of length equal to the number of genes, containing the proportion of cells with detected expression of each gene in the selection.</li>
<li><code>lfc</code>: a float dataset of length equal to the number of genes, containing the log-fold change in the selection compared to all other cells.</li>
<li><code>delta_detected</code>: same as <code>lfc</code>, but for the delta-detected (i.e., difference in the percentage of detected expression).</li>
<li><code>cohen</code>: same as <code>lfc</code>, but for Cohen's d.</li>
<li><code>auc</code>: same as <code>lfc</code>, but for the AUCs.  </li>
</ul>
</li>
</ul>
</details>
</div><div style="color:blue"><details>
<hr  />
 <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>An open HDF5 file handle. </td></tr>
    <tr><td class="paramname">num_cells</td><td>Number of cells in the dataset after QC filtering. </td></tr>
    <tr><td class="paramname">modalities</td><td>Modalities available in the dataset, should be some combination of <code>"RNA"</code> or <code>"ADT"</code>. If <code>version &lt; 2000000</code>, this is ignored. </td></tr>
    <tr><td class="paramname">num_genes</td><td>Number of genes for each modality in <code>modalities</code>. If <code>version &lt; 2000000</code>, only the first value is used. </td></tr>
    <tr><td class="paramname">version</td><td>Version of the format.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the format is invalid, an error is raised. </dd></dl>
</details>
</div>
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
